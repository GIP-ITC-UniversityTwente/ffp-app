import{basemaps}from"../../common/basemaps";import{language}from"../../locales/locale";import{SettingsCtrl}from"./SettingsController";const params_form={rows:[{view:"toolbar",css:"webix_dark",cols:[{view:"label",label:__("Connection Parameters"),align:"center"}]},{view:"form",id:"app:dbform",elementsConfig:{readonly:!0,width:350,labelWidth:120},elements:[{view:"text",name:"dbconn:database",readonly:!1,required:!0,label:`${__("Database")}:`,placeholder:"Enter the database name...",on:{onEnter:()=>{$$("app:connect").toggle(),SettingsCtrl.checkConnection(!0)}}},{view:"text",name:"dbconn:server",label:`${__("Server")}:`},{view:"text",name:"dbconn:port",label:`${__("Port")}:`},{view:"text",name:"dbconn:user",label:`${__("User")}:`},{view:"text",name:"dbconn:schema",label:`${__("Schema")}:`}]},{view:"toolbar",paddingY:10,cols:[{},{view:"toggle",id:"app:connect",type:"icon",offLabel:`${__("Connect")}...`,offIcon:"mdi mdi-lan-connect",onLabel:`${__("Disconnect")}...`,onIcon:"mdi mdi-lan-disconnect",width:160,click:function(){SettingsCtrl.checkConnection(0==this.getValue())},on:{onAfterRender:()=>SettingsCtrl.initConnectionForm()}},{}]}]},options_form={rows:[{view:"toolbar",css:"webix_dark",cols:[{view:"label",label:__("Interface"),align:"center"}]},{view:"form",elements:[{view:"select",id:"app:lang",width:350,label:`${__("Language")}:`,value:appdata.lang,options:language,on:{onChange:e=>SettingsCtrl.toggleLanguage(e)}},{view:"select",id:"app:basemap",width:350,label:`${__("Base Map")}:`,value:appdata.lang,options:basemaps,value:appdata.basemap,on:{onChange:e=>SettingsCtrl.setBasemap(e)}}]},{},{view:"toolbar",css:"webix_dark",cols:[{view:"label",label:__("Length & Area Calculations"),align:"center"}]},{view:"form",id:"app:srid_form",disabled:!0,elements:[{view:"text",id:"app:srid",css:"dropdown",label:"SRID:",attributes:{maxlength:8},labelWidth:50,tooltip:__("Enter a valid SRID number"),suggest:{id:"app:srid_list",fitMaster:!1,width:400,textValue:"srid",body:{template:"#srid# - #srtext#",dataFeed:"api/tools.py?function=getsridlist",on:{onBeforeLoad:()=>{if($$("app:srid").getValue().length<1&!SettingsCtrl.loadSrid)return!1},onBeforeSelect:e=>!1,onItemClick:e=>{SettingsCtrl.validateSrid=!1,SettingsCtrl.onSridSelect(e)}}}},on:{onKeyPress:e=>{if(SettingsCtrl.validateSrid=!0,(e<48||57<e)&&8!=e&&37!=e&&39!=e)return!1},onItemClick:function(){$$(this.config.suggest).config.master=this,$$(this.config.suggest).show(this.$view.getElementsByTagName("input")[0])},onFocus:function(){this.getInputNode().select()},onBlur:function(){SettingsCtrl.validateSrid&&SettingsCtrl.onValidateSrid()}}},{view:"text",id:"app:srtext",readonly:!0,label:"&nbsp;",labelWidth:50}]}]};var SettingsView={id:"settings-cnt",type:"clean",css:{"background-color":"#fff"},rows:[{rows:[{},{cols:[{},params_form,{width:40},options_form,{}]},{}]}],getController:()=>SettingsCtrl};export{SettingsView};