import{codes}from"../../common/codelists";import{FileUploader}from"../../common/uploader";import{RightsCtrl}from"./RightsController";const RightsWindow=webix.ui({view:"window",id:"right_details_window",position:"center",head:{view:"toolbar",cols:[{id:"rw:label",view:"label",label:"&nbsp;"+__("Right Information for Spatialunit")+" &rarr; "},{view:"icon",icon:"mdi mdi-close",click:RightsCtrl.onCancelRightEdits}]},width:740,height:600,modal:!0,move:!0,body:{type:"space",cols:[{width:0,rows:[{view:"property",id:"rw:right_details",width:0,nameWidth:140,autoheight:!0,elements:[{label:__("General Details"),type:"label",css:"property_label"},{id:"rw:right_type",type:"select",label:__("Type"),css:"right_details",options:codes[appdata.lang].righttype},{id:"rw:right_source",type:"select",label:__("Source"),css:"right_details",options:codes[appdata.lang].rightsource},{id:"rw:right_validsince",type:"date",label:__("Valid Since"),css:"right_details",format:webix.Date.dateToStr("%d-%M-%Y")},{id:"rw:right_description",type:"popup",label:__("Description"),css:"right_details",popup:{view:"popup",css:"select_popup",body:{view:"textarea",placeholder:__("Right description"),width:280,height:100}}}],on:{onAfterEditStop:()=>{RightsCtrl.rightData.edited=!0,$$("rw:save_btn").enable()},onAfterEditStart:t=>{if("rw:right_validsince"==t){let t=$$("rw:right_details").getEditor().getPopup();t.getBody().define("maxDate",new Date),t.getBody().refresh()}}}},{view:"property",id:"rw:attachment_counter",autoheight:!0,nameWidth:140,editable:!1,elements:[{id:"rw:attachment_sets",label:__("Attachment Sets"),type:"text"},{id:"rw:attachment_count",label:__("No. Attachments"),type:"text"}]},{},{view:"property",id:"rw:attachment_details",autoheight:!0,elements:[{id:"rw:attachments_title",type:"label",label:__("Attachment Set"),css:"property_label"},{id:"rw:attachment_type",type:"select",label:__("Type"),css:"right_details",options:codes[appdata.lang].rightattachment},{id:"rw:attachment_notes",type:"popup",label:__("Notes"),css:"right_details",popup:{view:"popup",css:"select_popup",body:{view:"textarea",placeholder:__("Type attachments notes"),width:280,height:80}}}],on:{onBeforeEditStart:t=>{"rw:attachments_title"!=t&&($$("rw:carousel").disable(),$$("rw:button_cnt1").disable(),$$("rw:button_cnt2").disable())},onAfterEditStop:(t,e)=>{RightsCtrl.onRightAttachmentEdit(t.value,e.config.id),$$("rw:carousel").enable(),$$("rw:button_cnt1").enable(),$$("rw:button_cnt2").enable(),$$("rw:save_btn").enable()}}},{view:"property",id:"rw:image_counter",autoheight:!0,editable:!1,elements:[{id:"rw:image_count",label:__("Image"),type:"text"}]},{},{type:"wide",id:"rw:button_cnt1",css:{"background-color":"#fff"},padding:4,height:40,cols:[{},{view:"button",label:__("Upload Attachment"),autowidth:!0,css:"blue_button",click:()=>{FileUploader.fileDialog({att_type:"att_right",callback:RightsCtrl.addRightAttachment})}},{}]},{type:"wide",id:"rw:button_cnt2",css:{"background-color":"#fff"},padding:4,height:40,cols:[{view:"button",label:__("Close"),autowidth:!0,css:"blue_button",click:RightsCtrl.onCancelRightEdits},{},{view:"button",id:"rw:save_btn",label:__("Save"),autowidth:!0,disabled:!0,css:"blue_button",click:RightsCtrl.updateRightDetails}]}]},{view:"carousel",id:"rw:carousel",width:420,css:"webix_dark",navigation:{type:"side"},on:{onShow:function(t){RightsCtrl.onShowRightAttachment(t)}}}]},on:{onShow:function(){RightsCtrl.onRightDetailsWindowShow()}},getController:()=>RightsCtrl});export{RightsWindow};